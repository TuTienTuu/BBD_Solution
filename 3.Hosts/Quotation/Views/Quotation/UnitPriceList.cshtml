@using ViewModels.Common
@model ApiResult<IEnumerable<ViewModels.Catalog.UnitPrices.UnitPriceViewModel>>
@section Scripts{
   @* <script src="~/js/jsControllers/knifeController/Index.js"></script>*@
}
<div class="row">
    <div class="col-8">
        @* <h1>@ViewData["Title"]</h1>*@
        <h1 class="text-secondary font-weight-bolder">Danh sách giấy</h1>
    </div>
    @* <div class="col-4 d-flex justify-content-center">
        @if (TempData["ResultOk"] != null)
        {
        <h4 aria-hidden="true" id="alertMesss" class="alert-success">@TempData["ResultOk"]</h4>
        }
        else
        {
        <h4 type="button" class="close" data-dismiss="alert" aria-label="Close">
        </h4>
        }
        </div>*@
    <div class="container-fluid">
        <div class="row">

            <form method="get" enctype="multipart/form-data" class="mb-1 w-100">
                <div class="row">
                    @*<div class="col-sm-1 col-md-1 col-lg-1 col-xl-1 float-right">Độ dày giấy</div>
                    <div class="col-sm-1 col-md-1 col-lg-1 col-xl-1 float-right">
                        <input type="number" class="form-control border-0 small" name="paperThick" id="soleThick" value="@ViewData["paperThick"]" aria-describedby="basic-addon2" />
                    </div>
                    <div class="col-sm-1 col-md-1 col-lg-1 col-xl-1 float-right">Tên hàng</div>
                    <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 float-right">
                        @Html.DropDownList("paperTypeList", null, new { @class = "form-control d-sm-inline-block", @id = "paperTypeListSearch", @name = "paperTypeListSearch" })
                    </div>

                     <div class="col-sm-1 col-md-1 col-lg-1 col-xl-1 float-right">Loại</div>
                    <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 float-right">
                        @Html.DropDownList("paperTypeMainList", null, new { @class = "form-control d-sm-inline-block", @id = "paperTypeMainListSearch", @name = "paperTypeMainListSearch" })
                    </div>

                      <div class="col-sm-1 col-md-1 col-lg-1 col-xl-1 float-right">Đế</div>
                    <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2 float-right">
                        @Html.DropDownList("soleList", null, new { @class = "form-control d-sm-inline-block", @id = "soleListSearch", @name = "soleListSearch" })
                    </div>

                    <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 float-right">
                         <button class="btn btn-primary" type="submit" id="btnSearch">
                            Tìm kiếm
                            </button>
                        <a class="btn btn-success" onclick="show(0)" data-toggle="modal" data-target="#myModal">
                            Thêm mới
                        </a>


                         @if (Model.Count() > 0)
                            {
                            <a class="btn btn-info ml-2" id="btnExport">
                            Export Excel
                            </a>
                            }
                    </div>*@

                </div>
            </form>

        </div>
    </div>
</div>
<div class="row">
    <div class=" table-responsive tableFixHead" style="max-height:750px; overflow-y:scroll;">
        <table class="table table-bordered  table-hover" cellspacing="0" width="100%" style="overflow-x:scroll;  border-spacing: 0px;" id="table_id">
            <thead>
                <tr>
                    <th scope="col"><b style="opacity:0%;">..................</b>#<b style="opacity:0%;">..................</b></th>
                    @*<th scope="col"><b style="opacity:0%;"></b>Tênkeo<b style="opacity:0%;"></b></th>*@
                    <th scope="col"><b style="opacity:0%;"></b>Mặthàng<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Sốlượng<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>ĐVT<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>CôngVHmáy<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;">........</b>CôngQL<b style="opacity:0%;">........</b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Điệnmáy<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Khấuhao<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Thuêxưởng<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Decal<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Màng\PhủUV<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Lõi<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Màu<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Film<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Bản<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Thùng<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Màngco<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Daobế<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Tổngchiphí<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>ChiếtkhấuSales<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>ChiếtkhấuKH<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>%Lợinhuận<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Grandtotal<b style="opacity:0%;"></b></th>
                    <th scope="col"><b style="opacity:0%;"></b>Đơngiá<b style="opacity:0%;"></b></th>

                    @* <th scope="col"><b style="opacity:0%;"></b>Mãhàng<b style="opacity:0%;"></b></th>*@


                </tr>
            </thead>
            <tbody style="font-size:12px;">

                @*<tr class="@(item.IsDeleted == true?"text-danger":"")">*@
                @if (Model.ResultObj.Count() > 0)
                {

                    @foreach (var item in Model.ResultObj)
                    {
                        <tr class="">
                           @* <td class="p-0 text-center" style="font-size:10px; line-height:13px;">
                                <a class="btn btn-sm btn-info" onclick="show(@item.ID)" data-toggle="modal" data-target="#myModal">Sửa</a>
                                <a class="btn btn-sm btn-warning" onclick="showPrice(@item.ID)" data-toggle="modal" data-target="#updatePriceModal">Chỉnh giá</a>
                                <a class="btn btn-sm btn-danger" onclick="deleteData(@item.ID)">Xóa</a>
                            </td>*@
                             <td class="p-0 text-center">
                                @item.ID
                            </td>
                            <td class="p-0 text-center">
                                @item.Spec
                            </td>
                            <td class="p-0 text-center">
                                @item.Quantity
                            </td>
                            <td class="p-0 text-center">
                                @item.Unit
                            </td>
                            <td class="p-0 text-center">
                                @item.CD_TotalSalary.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.ManagermentFeeTotal.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.ElectricFee.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.DepriciationTotalFee.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.WorkshopRentalFee.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.DecalTotalPrice.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.LaminationTotalPrice.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.CorePrice.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.ColorPrice.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.FilmPrice.ToString("##,###.##")
                            </td>
                            <td class="p-0 text-center">
                                @item.Print_Price.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.BoxPrice.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.SrinkFilmPrice.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.KnifeUnitFee.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.Total.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.SaleDiscount.ToString("##,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @item.CustomerDiscount
                            </td>
                             <td class="p-0 text-center">
                                @item.ProfitPercent
                            </td>
                             <td class="p-0 text-center">
                                @item.FinalyTotal.ToString("#,###.##")
                            </td>
                             <td class="p-0 text-center">
                                @(item.FinalyTotal/item.Quantity)
                            </td>
                            
                        </tr>
                    }
                }
                else
                {
                    <tr><td colspan="4">Không có dữ liệu</td></tr>
                }
                @* <tr class="">
                    <td class="p-0 text-center">
                    <a class="btn btn-sm btn-info" data-toggle="modal" data-target="#myModal">Sửa</a>
                    <a class="btn btn-sm btn-danger" onclick="deleteData()">Xóa</a>
                    </td>
                    <td class="p-0 text-center">
                    Keo hotmelt
                    </td>
                    <td class="p-0 text-center">
                    H
                    </td>
                    <td class="p-0 text-center">
                    Keo hotmelt dùng để....
                    </td>
                    </tr>*@

            </tbody>
        </table>
    </div>
</div>


@section CSS{
<link href="~/vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet" />
@*<link href="~/css/viewTable.css" rel="stylesheet" />*@
<style>
    /*on top header */
    .tableFixHead {
        overflow: auto;
        height: auto;
    }

        .tableFixHead thead th {
            position: sticky;
            top: 0;
            z-index: 1;
        }

    /* Just common table stuff. Really. */
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        padding: 8px 16px;
    }

    th {
        background: #eee;
    }
</style>
}